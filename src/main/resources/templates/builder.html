<!DOCTYPE html>
<html xmlns= "http://www.w3.org/1999/xhtml"
xmlns:th="http://www.thymeleaf.org"
xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity3"
xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout">

<head>
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" />
	<link rel="stylesheet" href="https://unpkg.com/formiojs@latest/dist/formio.full.min.css" />
	<script src='https://unpkg.com/formiojs@latest/dist/formio.full.min.js'></script>
</head>

<body>
	<div id="result-message"></div>
	<div class="form-group">
		<label for="exampleInputEmail1">Title</label>
		<input type="text" class="form-control" id="title" placeholder="Enter the form title" />
	</div>
	<div class="row">
		<div class="col-md-6">
			<div class="form-group row">
				<label class="col-sm-1 col-form-label">Path</label>
				<div class="col-sm-11">
					<input type="text" class="form-control" id="path" placeholder="example" style="text-transform: lsowercase" />
				</div>
			</div>
		</div>
		<div class="col-md-6">
			<div class="form-group row">
				<label class="col-sm-1 col-form-label">Tags</label>
				<div class="col-sm-11">
					<input type="text" class="form-control" id="path" placeholder="Add a tag" />
				</div>
			</div>
		</div>
	</div>
	<div class="row">
		<div class="col-md-6">
			<div class="form-group row">
				<label class="col-sm-2 col-form-label">Expired date</label>
				<div class="col-sm-10">
					<input type="date" class="form-control" id="expired-date" />
				</div>
			</div>
		</div>
		<div class="col-md-6">
			<div class="form-group row">
				<label class="col-sm-2 col-form-label">Expired time</label>
				<div class="col-sm-10">
					<input type="time" class="form-control" id="expired-time" />
				</div>
			</div>
		</div>
	</div>
	<div id="builder"></div>
	<button type="submit" class="btn btn-info mr-2" id="create" disabled="disabled">Create</button>
    <button class="btn btn-warning">Cancel</button>
    
	<script th:inline="javascript">
		let builder = new Formio.FormBuilder(document.getElementById('builder'), {
			display: 'form',
			type: 'form',
			tags: [],
			owner: null,
			title: null,
			path: null,
			components: [],
			created: null,
			expiredDate: null,
			expiredTime: null
		});
		
		const title = document.getElementById('title');
		const path = document.getElementById('path');
		const expiredDate = document.getElementById('expired-date');
		const expiredTime = document.getElementById('expired-time');
		const createBtn = document.getElementById('create');
		
		const setDisplay = function(display) {
			builder.setDisplay(display).then(function(instance) {     
				instance.on('change', function(form) {
					if (form.components) {
						form.components.length !== 0 ? createBtn.removeAttribute('disabled') : createBtn.setAttribute('disabled', 'disabled');		
						// alert(document.getElementById('expired-time').value);
					}
				});
			});
		};
		
		setDisplay('form');
		
		title.addEventListener('change', function () {
			builder.form.title = title.value;
		});
		
		path.addEventListener('change', function () {
			builder.form.path = path.value;
		});
		
		expiredDate.addEventListener('change', function () {
			builder.form.expiredDate = expiredDate.value;
		});
		
		expiredTime.addEventListener('change', function () {
			builder.form.expiredTime = expiredTime.value;
		});
	</script>
</body>

</html>